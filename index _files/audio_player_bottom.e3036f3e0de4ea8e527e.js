(window.webpackJsonp=window.webpackJsonp||[]).push([["audio_player_bottom"],{5:function(e,a,t){e.exports=t("YIWZ")},YIWZ:function(e,a,t){"use strict";t.r(a);var o=t("wx14"),n=t("dI71"),i=t("TYsd"),s=t("z9sQ"),r=t("+sJP"),d=t("Y6JH"),l=t("iwo4"),c=t("I/6K"),u=t("dkoO"),p=t("rPOn"),h=t("NVf3"),_=t("XVhu"),y=t("QIah"),b=t("M2Vy"),m=t("Ll74"),g=t("yvch"),P=t("MgHc"),E=t("BNie"),f=t("SKyi"),x=t("PXJN"),B=t("0f7M"),A=t("4ekA"),O=t("5hjO"),C=t("cPhM");var T=function(e){var a=e.showCollapsed,t=e.adsplaying,o=t?Object(r.t)("mobile_audio_player_ad"):e.title,n=t?"":e.subtitle,i=t?"":e.performer,T=t?[]:e.mainArtists,v=t?[]:e.featArtists,j=e.cover,M=e.loaded,w=e.progress,D=e.listened,S=e.remained,k=e.explicit,R=e.expanded,I=e.playing,H=e.canRepeat,N=e.shuffled,L=e.onPlay,K=e.onPause,q=e.onPrev,F=e.onNext,W=e.onClose,Y=e.onShuffle,G=e.onDisableAds,U=e.onRepeat,X=e.onCollapsedClick,J=e.onCollapsedKeyDown,Q=e.onExpandedClose,V=e.onExpandedMore,Z=e.onHandleTouchStart,z=e.onProgressBarTouchStart,$=e.onProgressBarMouseDown,ee=e.onProgressBarClick,ae=e.onProgressKeyDown,te=e.onTouchMove,oe=e.onTouchEnd,ne=e.onTouchCancel,ie=e.onMouseMove,se=e.onMouseUp;if(!a&&!R)return"";var re=s.a.class("AudioPlayerBottom",{expanded:R,collapsed:!R}),de="",le="",ce="",ue="",pe="",he="",_e="",ye="",be="",me="",ge="",Pe="",Ee="",fe="",xe="",Be="",Ae="",Oe=Object(b.a)();if(R){de=s.a.class("AudioPlayerBottomExpanded__playerControls",{playing:I}),le=o?{inner:[o],class:"AudioPlayerBottomExpanded__title",tag:"span"}:"",ce=n?{inner:[n],class:"AudioPlayerBottomExpanded__subtitle",tag:"span"}:"",ue=!t&&k?{inner:[Object(d.a)({icon:Object(c.a)()})],class:"AudioPlayerBottomExpanded__explicit",tag:"span"}:"",pe=T.length>0?[{inner:[T[0][1]],href:"/artist/"+T[0][0],tag:"a"}]:[];for(var Ce=1;Ce<T.length;Ce++)pe.push(", ",{inner:[T[Ce][1]],href:"/artist/"+T[Ce][0],tag:"a"});he=v.length>0?[{inner:[v[0][1]],href:"/artist/"+v[0][0],tag:"a"}]:[];for(var Te=1;Te<v.length;Te++)he.push(", ",{inner:[v[Te][1]],href:"/artist/"+v[Te][0],tag:"a"});_e=0===pe.length&&0===he.length?i:"",ye=j&&!t?{backgroundImage:"url("+j+")"}:{},be=!j||t?Object(d.a)({icon:Object(u.a)()}):"",me={width:100*M+"%"},ge={width:100*w+"%"},Pe={left:100*w+"%"},Ee=s.a.class("AudioPlayerBottomExpanded__shuffle",{active:N}),fe=s.a.class("AudioPlayerBottomExpanded__repeat",{active:!!H,activeAll:H===l.a.ALL,activeOne:H===l.a.ONE}),H===l.a.ALL&&(Oe=Object(m.a)()),H===l.a.ONE&&(Oe=Object(g.a)()),xe=I?"AudioPlayerBottomExpanded__pause":"AudioPlayerBottomExpanded__play",Ae=I?Object(P.a)():Object(E.a)(),Be=I?Object(r.t)("mobile_audio_player_pause"):Object(r.t)("mobile_audio_player_play")}var ve="",je="",Me="",we="",De="",Se="",ke="";a&&(ve=s.a.class("AudioPlayerBottomCollapsed__controls",{playing:I}),je=o?{inner:[o],class:"AudioPlayerBottomCollapsed__title",tag:"span"}:"",Me=n?{inner:[n],class:"AudioPlayerBottomCollapsed__subtitle",tag:"span"}:"",we=!t&&k?{inner:[Object(d.a)({icon:Object(c.a)()})],class:"AudioPlayerBottomCollapsed__explicit",tag:"span"}:"",De=I?"AudioPlayerBottomCollapsed__pause":"AudioPlayerBottomCollapsed__play",Se=I?Object(f.a)():Object(x.a)(),ke=I?Object(r.t)("mobile_audio_player_pause"):Object(r.t)("mobile_audio_player_play"));var Re=I?K:L;return{inner:[a&&{inner:[{inner:[{inner:[Object(d.a)({icon:Se})],class:De,onClick:Re,"aria-label":ke,tag:"button"}],class:ve,tag:"div"},{inner:[{inner:[je,Me,we],class:"AudioPlayerBottomCollapsed__info1",tag:"div"},{inner:[{inner:[i],class:"AudioPlayerBottomCollapsed__performer",tag:"span"}],class:"AudioPlayerBottomCollapsed__info2",tag:"div"}],class:"AudioPlayerBottomCollapsed__info",onClick:X,onKeyDown:J,role:"button",tabIndex:"0","aria-label":Object(r.t)("mobile_audio_player_open_detail"),"aria-haspopup":"true","aria-expanded":"false","aria-controls":"AudioPlayerBottomExpanded",tag:"div"},{inner:[{inner:[Object(d.a)({icon:I?Object(B.a)():Object(A.a)()})],class:"AudioPlayerBottomCollapsed__next",onClick:I?F:W,"aria-label":I?Object(r.t)("mobile_audio_player_next"):Object(r.t)("mobile_audio_player_close"),disabled:I&&t,tag:"button"}],class:"AudioPlayerBottomCollapsed__controls",tag:"div"}],role:"complementary",class:"AudioPlayerBottomCollapsed","aria-hidden":R,tag:"div"},R&&{inner:[{class:"AudioPlayerBottomExpanded__handle",role:"button",onClick:Q,"aria-label":Object(r.t)("mobile_audio_player_close"),onTouchStart:Z,tag:"button"},{inner:[Object(d.a)({icon:Object(p.a)()})],class:"AudioPlayerBottomExpanded__close",onClick:Q,"aria-label":Object(r.t)("mobile_audio_player_close"),tag:"button"},{inner:[{inner:[{inner:[{inner:[be],class:"AudioPlayerBottomExpanded__photoImage",style:ye,tag:"span"}],class:"AudioPlayerBottomExpanded__photo",tag:"span"},{inner:[{inner:[le,ce,ue],class:"AudioPlayerBottomExpanded__info1",tag:"div"},{inner:[{inner:[pe,he.length>0?{inner:" feat. ",tag:"span"}:"",he,_e],class:"AudioPlayerBottomExpanded__performer",tag:"span"}],class:"AudioPlayerBottomExpanded__info2",tag:"div"}],class:"AudioPlayerBottomExpanded__info",tag:"div"},{inner:[{inner:[Object(d.a)({icon:Object(h.a)()})],class:"AudioPlayerBottomExpanded__more",onClick:V,"aria-label":Object(r.t)("mobile_audio_player_more"),disabled:t,tag:"button"}],class:"AudioPlayerBottomExpanded__controls",tag:"div"}],class:"AudioPlayerBottomExpanded__header",tag:"div"},{inner:[{inner:[{class:"AudioPlayerBottomExpanded__progressLoaded",style:me,tag:"span"},{class:"AudioPlayerBottomExpanded__progressCurrent",style:ge,tag:"span"},{class:"AudioPlayerBottomExpanded__progressControl",style:Pe,onTouchStart:z,onMouseDown:$,tag:"span"}],class:s.a.class("AudioPlayerBottomExpanded__progressBar",{disabled:t}),onClick:ee,onKeyDown:ae,role:"slider",tabindex:"0","aria-label":Object(r.t)("mobile_audio_player_progress"),"aria-valuemin":"0","aria-valuemax":"1","aria-valuenow":w,"aria-valuetext":Math.round(100*w)+"%",tag:"div"},{inner:[D],class:"AudioPlayerBottomExpanded__progressTimeListened",tag:"span"},{inner:[S],class:"AudioPlayerBottomExpanded__progressTimeRemained",tag:"span"}],class:"AudioPlayerBottomExpanded__progress",tag:"div"},{inner:[{inner:[Object(d.a)({icon:Object(_.a)()})],class:"AudioPlayerBottomExpanded__prev",onClick:q,"aria-label":Object(r.t)("mobile_audio_player_prev"),disabled:t,tag:"button"},{inner:[Object(d.a)({icon:Ae})],class:xe,onClick:Re,"aria-label":Be,tag:"button"},{inner:[Object(d.a)({icon:Object(y.a)()})],class:"AudioPlayerBottomExpanded__next",onClick:F,"aria-label":Object(r.t)("mobile_audio_player_next"),disabled:t,tag:"button"}],class:de,tag:"div"},{inner:[{inner:[Object(d.a)({icon:N?Object(O.a)():Object(C.a)()})],class:Ee,onClick:Y,"aria-label":Object(r.t)("mobile_audio_player_shuffle"),disabled:t,tag:"button"},t&&{inner:[Object(r.t)("mobile_audio_player_disable_ads")],class:"AudioPlayerBottomExpanded__disableAds",onClick:G,href:"/combo","aria-label":Object(r.t)("mobile_audio_player_disable_ads"),"aria-hidden":!t,hidden:!t,tag:"a"},{inner:[Object(d.a)({icon:Oe})],class:fe,onClick:U,"aria-label":Object(r.t)("mobile_audio_player_repeat"),disabled:t,tag:"button"}],class:"AudioPlayerBottomExpanded__footer",tag:"div"}],class:"AudioPlayerBottomExpanded__container",tag:"div"}],id:"AudioPlayerBottomExpanded",class:"AudioPlayerBottomExpanded",onTouchCancel:ne,onTouchEnd:oe,onTouchMove:te,onMouseMove:ie,onMouseUp:se,"aria-modal":"true",tag:"div"}],class:re,tag:"div"}},v=t("TxnK"),j=t("OcsD"),M=t("CQvH"),w=t("DM2o"),D=t("rEJs"),S=function(e){function a(){var a;return(a=e.call(this)||this).UP=38,a.DOWN=40,a.RIGHT=39,a.LEFT=37,a.SPACE=32,a.ENTER=13,a.PROGRESS_PERCENT_CHANGE=.05,a.TABLED_MEDIA_WIDTH=620,a.containerOffset=0,a.containerOpacity=0,a.progressBarPosition=0,a.audio.subscribe(D.a.REQUEST_EXPANDED,(function(){a.openExpanded()})),a}Object(n.a)(a,e);var t=a.prototype;return t.updateElementsSelections=function(){this.audioPlayerExpanded=document.querySelector(".AudioPlayerBottomExpanded"),this.audioPlayerExpandedProggressBar=document.querySelector(".AudioPlayerBottomExpanded__progressBar"),this.audioPlayerExpandedHandle=document.querySelector(".AudioPlayerBottomExpanded__handle"),this.audioPlayerExpandedContainer=document.querySelector(".AudioPlayerBottomExpanded__container"),this.audioPlayerCollapsedInfo=document.querySelector(".AudioPlayerBottomCollapsed__info"),this.bottomMenu=document.querySelector(".BottomMenu"),this.audioPlayerMini=document.querySelector(".MainMenu .AudioPlayerMini")},t.getState=function(){var a=this,t=e.prototype.getState.call(this);return this.updateElementsSelections(),Object(o.a)({},t,{showCollapsed:t.show&&this.bottomMenu&&0!==this.bottomMenu.getBoundingClientRect().width&&(!this.audioPlayerMini||0===this.audioPlayerMini.getBoundingClientRect().width),onCollapsedClick:function(){return a.onCollapsedClick()},onCollapsedKeyDown:function(e){return a.onCollapsedKeyDown(e)},onExpandedClose:function(){return a.onExpandedClose()},onExpandedMore:function(e){Object(w.a)(a.STAT_KEY,"more",a.state.expanded),window.audioplayer.morePopup(e)},onHandleTouchStart:function(e){return a.onHandleTouchStart(e)},onProgressBarTouchStart:function(e){return a.onProgressBarTouchStart(e)},onProgressBarMouseDown:function(e){return a.onProgressBarMouseDown(e)},onProgressBarClick:function(e){return a.onProgressBarClick(e)},onProgressKeyDown:function(e){return a.onProgressKeyDown(e)},onTouchMove:function(e){return a.onTouchMove(e)},onTouchEnd:function(e){return a.onTouchEnd(e)},onTouchCancel:function(e){return a.onTouchEnd(e)},onMouseMove:function(e){return a.onMouseMove(e)},onMouseUp:function(e){return a.onMouseUp(e)}})},t.openExpanded=function(){var e=this;Object(w.a)(this.STAT_KEY,"open_expanded",this.state.expanded),this.setState({expanded:!0}),requestAnimationFrame((function(){e.audioPlayerExpanded&&(e.audioPlayerCollapsedInfo&&(e.expandPopup=Object(M.a)(e.audioPlayerCollapsedInfo)),e.cancelFocusTrap=Object(M.d)(e.audioPlayerExpanded),e.cancelFocusTrap&&(e.cancelFocusTrap.exitIntent=function(){return e.closeExpanded()}))}))},t.closeExpanded=function(){Object(w.a)(this.STAT_KEY,"close_expanded",this.state.expanded),this.cancelFocusTrap&&this.cancelFocusTrap(),this.expandPopup&&this.expandPopup(),this.setState({expanded:!1})},t.onCollapsedClick=function(){this.updateElementsSelections(),this.openExpanded()},t.onCollapsedKeyDown=function(e){e.keyCode!==this.SPACE&&e.keyCode!==this.ENTER||(this.updateElementsSelections(),this.openExpanded())},t.onExpandedClose=function(){this.closeExpanded()},t.onHandleTouchStart=function(e){this.updateElementsSelections(),this.onTouchEnd(e),e&&e.touches&&1===e.touches.length&&window.innerWidth<=this.TABLED_MEDIA_WIDTH?(this.audioPlayerExpandedHandle.classList.add("AudioPlayerBottomExpanded__handle--touch"),this.handleTouchTime=Date.now(),this.handleTouch=e.touches[0].clientY,this.state.expanded||this.openExpanded()):this.handleTouch=!1,this.onTouchMove(e)},t.onProgressBarTouchStart=function(e){this.onTouchEnd(e),e&&e.touches&&1===e.touches.length?this.prgressBarTouch=this.audioPlayerExpandedProggressBar.getBoundingClientRect():this.prgressBarTouch=!1,this.onTouchMove(e)},t.onProgressBarMouseDown=function(e){this.prgressBarMouse=this.audioPlayerExpandedProggressBar.getBoundingClientRect(),e.preventDefault()},t.onProgressBarClick=function(e){var a=this;if(!this.state.adsplaying){this.updateElementsSelections();var t=this.audioPlayerExpandedProggressBar.getBoundingClientRect(),o=t.left,n=t.right,i=t.width;this.progressBarPosition=(Math.min(n,Math.max(o,e.clientX))-o)/i,requestAnimationFrame((function(){return a.audio.setPosition(a.progressBarPosition,!0)}))}},t.onProgressKeyDown=function(e){var a=this;if(this.audio.getCurrent())if(e.keyCode===this.UP||e.keyCode===this.RIGHT){var t=Math.max(0,Math.min(1,this.audio.getPosition()/this.audio.duration()+this.PROGRESS_PERCENT_CHANGE));requestAnimationFrame((function(){return a.audio.setPosition(t,!0)})),e.preventDefault()}else if(e.keyCode===this.DOWN||e.keyCode===this.LEFT){var o=Math.max(0,Math.min(1,this.audio.getPosition()/this.audio.duration()-this.PROGRESS_PERCENT_CHANGE));requestAnimationFrame((function(){return a.audio.setPosition(o,!0)})),e.preventDefault()}else e.keyCode!==this.SPACE&&e.keyCode!==this.ENTER||(this.audio.isPlaying()?this.audio.pause():this.audio.play(),e.preventDefault())},t.onTouchMove=function(e){var a=this;if(e&&e.touches&&1===e.touches.length&&this.handleTouch&&window.innerWidth<=this.TABLED_MEDIA_WIDTH){var t=Math.max(this.handleTouch,e.touches[0].clientY);this.containerOffset=t-this.handleTouch,this.containerOpacity=1-Math.min(1,Math.max(0,this.containerOffset/this.handleTouch)),Object(j.jc)(this.audioPlayerExpandedHandle,{transform:"translateY("+this.containerOffset+"px)"}),Object(j.jc)(this.audioPlayerExpandedContainer,{transform:"translateY("+this.containerOffset+"px)"}),Object(j.jc)(this.audioPlayerExpanded,{opacity:this.containerOpacity}),e.preventDefault()}if(e&&e.touches&&1===e.touches.length&&this.prgressBarTouch){if(this.state.adsplaying)return;var o=this.prgressBarTouch,n=o.left,i=o.right,s=o.width;this.progressBarPosition=(Math.min(i,Math.max(n,e.touches[0].clientX))-n)/s,requestAnimationFrame((function(){return a.audio.setPosition(a.progressBarPosition,!0)})),e.preventDefault()}},t.onTouchEnd=function(e){this.onTouchMove(e),this.handleTouch&&window.innerWidth<=this.TABLED_MEDIA_WIDTH&&(this.audioPlayerExpandedHandle.classList.remove("AudioPlayerBottomExpanded__handle--touch"),Object(j.jc)(this.audioPlayerExpandedHandle,{transform:""}),Object(j.jc)(this.audioPlayerExpandedContainer,{transform:""}),Object(j.jc)(this.audioPlayerExpanded,{opacity:1}),this.containerOpacity>.7?this.state.expanded||this.openExpanded():this.state.expanded&&this.closeExpanded(),Date.now()-this.handleTouchTime<250&&this.closeExpanded()),this.handleTouch=!1,this.prgressBarTouch=!1},t.onMouseMove=function(e){var a=this;if(this.prgressBarMouse){if(this.state.adsplaying)return;var t=this.prgressBarMouse,o=t.left,n=t.right,i=t.width;this.progressBarPosition=(Math.min(n,Math.max(o,e.clientX))-o)/i,requestAnimationFrame((function(){return a.audio.setPosition(a.progressBarPosition,!0)})),e.preventDefault()}},t.onMouseUp=function(e){this.prgressBarMouse=!1},t.render=function(){return i.a.preact(T,Object(o.a)({},this.state))},a}(v.a),k=t("2mXy");function R(){if(window.audio&&window.audioplayer){var e=$(".AudioPlayerBottomContainer");e&&Object(k.e)(Object(k.b)(S,Object(r.y)("AudioPlayer")),e)}}onDOMReady(R),window.page&&page.onChange(R)},iwo4:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var o={NONE:0,ALL:1,ONE:2}}},[[5,"runtime","vendor","icons","b-93a435b854bd32d1172676df2ef0660b","b-cd1bd7666b0b0a417cbe4ad7de6f651d","b-cc249007038b89cf1982a1f77a49d64d","b-81a1af81a054f6bff8edd4d0775bf1af","b-3440d0a13a45352a309cc86a35537ef8"]]]);